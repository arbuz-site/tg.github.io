<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Летающие шарики</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: black;
        }
        .ball {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: white;
            pointer-events: none;
        }
        .line {
            position: absolute;
            height: 1px;
            background-color: white;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <script>
        const balls = [];
        const numBalls = 20;
        const canvasWidth = window.innerWidth;
        const canvasHeight = window.innerHeight;

        function createBall() {
            const ball = document.createElement('div');
            ball.classList.add('ball');
            ball.style.left = Math.random() * canvasWidth + 'px';
            ball.style.top = Math.random() * canvasHeight + 'px';
            ball.data = {
                x: parseFloat(ball.style.left),
                y: parseFloat(ball.style.top),
                vx: (Math.random() - 0.5) * 6, // Увеличенная скорость по X
                vy: (Math.random() - 0.5) * 6  // Увеличенная скорость по Y
            };
            document.body.appendChild(ball);
            balls.push(ball);
        }

        function createLine(x1, y1, x2, y2) {
            const line = document.createElement('div');
            line.classList.add('line');
            const length = Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2);
            line.style.width = length + 'px';
            line.style.transform = `rotate(${Math.atan2(y2 - y1, x2 - x1)}rad)`;
            line.style.left = x1 + 'px';
            line.style.top = y1 + 'px';
            document.body.appendChild(line);
        }

        function updateLines() {
            const lines = document.querySelectorAll('.line');
            lines.forEach(line => line.remove());

            balls.forEach((ball1, index1) => {
                balls.forEach((ball2, index2) => {
                    if (index1 !== index2) {
                        const rect1 = ball1.getBoundingClientRect();
                        const rect2 = ball2.getBoundingClientRect();
                        const x1 = rect1.left + rect1.width / 2;
                        const y1 = rect1.top + rect1.height / 2;
                        const x2 = rect2.left + rect2.width / 2;
                        const y2 = rect2.top + rect2.height / 2;

                        const distance = Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2);
                        if (distance < 100) { // Соединяем, если близко
                            createLine(x1, y1, x2, y2);
                        }
                    }
                });
            });
        }

        function moveBalls() {
            balls.forEach(ball => {
                ball.data.x += ball.data.vx;
                ball.data.y += ball.data.vy;
                ball.style.left = ball.data.x + 'px';
                ball.style.top = ball.data.y + 'px';

                // Отскок от стен
                if (ball.data.x < 0 || ball.data.x > canvasWidth) {
                    ball.data.vx *= -1;
                }
                if (ball.data.y < 0 || ball.data.y > canvasHeight) {
                    ball.data.vy *= -1;
                }
            });
        }

        function onTouchStart(e) {
            const touch = e.touches[0];
            balls.forEach(ball => {
                const rect = ball.getBoundingClientRect();
                const x = rect.left + rect.width / 2;
                const y = rect.top + rect.height / 2;
                const distance = Math.sqrt((touch.clientX - x) ** 2 + (touch.clientY - y) ** 2);
                if (distance < 50) {
                    ball.style.backgroundColor = 'red'; // Изменение цвета при касании
                }
            });
        }

        for (let i = 0; i < numBalls; i++) {
            createBall();
        }

        setInterval(() => {
            moveBalls();
            updateLines();
        }, 60); // Интервал обновления

        window.addEventListener('touchstart', onTouchStart);
    </script>
</body>
</html>
